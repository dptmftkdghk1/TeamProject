<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Nanum+Gothic+Coding&family=Nanum+Myeongjo&display=swap" rel="stylesheet">
</head>
<body>
    
    <div class="table-list">
        <h2>회사조직도</h2>
        <section class="table-list-design">
            <div class="organize-box">
                <div class="organize-round-first"></div>
                <textarea class="organize-line" th:text="${represent.representContent}">dfdf</textarea>
<!--                <div class="organize-line">-->
<!--                    <span>dfdfdfdf</span>-->
<!--                </div>-->
            </div>
            
            <div class="organize-ceo-letter"><span>대표이사</span></div>

            <div class="organize-lines-box">
                <div class="organize-lines"></div>
            </div>

            <div class="organize-rounds">
                <input type="text" class="organize-round" th:value="${depart[0].departName}">
                <div class="organize-round-line-box">
                    <div class="organize-round-line"></div>
                </div>
                <input type="text" class="organize-round" th:value="${depart[1].departName}">
<!--                <div class="organize-round"><span>개발 부서</span></div>-->
                <div class="organize-round-line-box">
                    <div class="organize-round-line"></div>
                </div>

                <input type="text" class="organize-round" th:value="${depart[2].departName}">
<!--                <div class="organize-round"><span>마케팅 부서</span></div>-->
            </div>

            <div class="organize-button-line" id="organize-btns-box">
                <div class="organize-square-button">
                    <button type="button" id="organize-first-plus-btn">+</button>
                    <button type="button" id="organize-first-minus-btn">-</button>
                </div>
                <div class="organize-square-line-box">
                </div>
                <div class="organize-square-button">
                    <button type="button" id="organize-second-plus-btn">+</button>
                    <button type="button" id="organize-second-minus-btn">-</button>
                </div>
                <div class="organize-square-line-box">
                </div>
                <div class="organize-square-button">
                    <button type="button" id="organize-third-plus-btn">+</button>
                    <button type="button" id="organize-third-minus-btn">-</button>
                </div>
            </div>

            <div class="organize-rounds">
<!--                <div th:text="${departDetail}"></div>-->
                <form id="organize-depart-first">
                    <input type="hidden" th:value="${depart[0].departNo}">
                    <div th:each="detail : ${departDetail}">
                        <div th:if="${detail.departNo == 1}">
                            <input class="organize-square" th:value="${detail.detailName}">
                        </div>
                    </div>
<!--                    <input class="organize-square" th:value="fvbvb">-->
<!--                    <input class="organize-square" th:value="xdcxvxcv">-->
<!--                    <input class="organize-square" th:value="xdcxvxcv">-->
                </form>

                
                <div class="organize-round-line-box">
                </div>

                <form id="organize-depart-second">
                    <input type="hidden" th:value="${depart[1].departNo}">
                    <div th:each="detail : ${departDetail}">
                        <div th:if="${detail.departNo == 2}">
                            <input class="organize-square" th:value="${detail.detailName}">
                            </input>
                        </div>
                    </div>
                </form>

                <div class="organize-round-line-box">
                </div>

                <form id="organize-depart-third">
                    <input type="hidden" th:value="${depart[1].departNo}">
                    <div th:each="detail : ${departDetail}">
                        <div th:if="${detail.departNo == 3}">
                            <input class="organize-square" th:value="${detail.detailName}">
                            </input>
                        </div>
                    </div>
                </form>

<!--                <form>-->
<!--                    <input type="hidden" th:value="${depart[2].departNo}">-->
<!--                    <div>-->
<!--                        <input class="organize-square" value="마케팅관리 부서">-->
<!--                        &lt;!&ndash;                        <span>경영관리 부서</span>&ndash;&gt;-->
<!--                        </input>-->
<!--                        &lt;!&ndash;                    <div class="organize-square">&ndash;&gt;-->
<!--                        &lt;!&ndash;                        <span>경영관리 부서</span>&ndash;&gt;-->
<!--                        &lt;!&ndash;                    </div>&ndash;&gt;-->
<!--                        &lt;!&ndash;                    <div class="organize-square">&ndash;&gt;-->
<!--                        &lt;!&ndash;                        <span>경영관리 부서</span>&ndash;&gt;-->
<!--                        &lt;!&ndash;                    </div>&ndash;&gt;-->
<!--                    </div>-->
<!--                </form>-->

            </div>

            <div class="organize-check">
                <button type="button" id="organize-update-mode">편집모드</button>
                <button type="button" id="organize-submit">확인</button>
                <button type="button" id="organize-cancel">취소</button>
            </div>
        </section>
    </div>
      
      
</body>
</html>
<script>
    // input form부분
    const form1 = document.getElementById('organize-depart-first');
    const form2 = document.getElementById('organize-depart-second');
    const form3 = document.getElementById('organize-depart-third');

    // +,-버튼 감싸는 박스
    const btns = document.getElementById('organize-btns-box');

    // +,- 버튼
    const firstPlusBtn = document.getElementById('organize-first-plus-btn');
    const firstMinusBtn = document.getElementById('organize-first-minus-btn');

    const secondPlusBtn = document.getElementById('organize-second-plus-btn');
    const secondMinusBtn = document.getElementById('organize-second-minus-btn');

    const thirdPlusBtn = document.getElementById('organize-third-plus-btn');
    const thirdMinusBtn = document.getElementById('organize-third-minus-btn');

    // 편집모드, 확인, 취소 버튼
    const updateMode = document.getElementById('organize-update-mode');
    const submitBtn = document.getElementById('organize-submit');
    const cancelBtn = document.getElementById('organize-cancel');

    submitBtn.style.display = "none";
    cancelBtn.style.display = "none";
    btns.style.display = "none";

    updateMode.onclick = () =>{
        updateMode.style.display = "none";
        submitBtn.style.display = "block";
        cancelBtn.style.display = "block";
        btns.style.display = "flex";
    }

    cancelBtn.onclick = () => {
        updateMode.style.display = "block";
        submitBtn.style.display = "none";
        cancelBtn.style.display = "none";
        btns.style.display = "none";

        fetch("/organize/list",{
            method: "GET",
        }).then(response => {
            if(response.ok){
                // alert('조회완료.');
                location.reload(); // 화면 새로고침
            }
        });
    }

    firstPlusBtn.onclick = () => {
        // input타입 생성
        const inputElement = document.createElement('input');
        inputElement.type = 'text'; // input 요소의 타입 설정
        inputElement.name = 'newInput'; // input 요소의 이름 설정 (필요시)
        // inputElement.value = 'dfdf';
        inputElement.classList.add('organize-square');
        // class="organize-square"

        // 생성된 input 요소를 form1에 추가
        form1.appendChild(inputElement);
    }

    firstMinusBtn.onclick = () => {
        const inputs = form1.querySelectorAll('input.organize-square');
        if(inputs.length > 0){
            const lastInput = inputs[inputs.length - 1];
            lastInput.remove();
        }

    }

    secondPlusBtn.onclick = () => {
        // input타입 생성
        const inputElement = document.createElement('input');
        inputElement.type = 'text'; // input 요소의 타입 설정
        inputElement.name = 'newInput'; // input 요소의 이름 설정 (필요시)
        // inputElement.value = 'dfdf';
        inputElement.classList.add('organize-square');
        // class="organize-square"

        // 생성된 input 요소를 form1에 추가
        form2.appendChild(inputElement);
    }

    secondMinusBtn.onclick = () => {
        const inputs = form2.querySelectorAll('input.organize-square');
        if(inputs.length > 0){
            const lastInput = inputs[inputs.length - 1];
            lastInput.remove();
        }

    }

    thirdPlusBtn.onclick = () => {
        // input타입 생성
        const inputElement = document.createElement('input');
        inputElement.type = 'text'; // input 요소의 타입 설정
        inputElement.name = 'newInput'; // input 요소의 이름 설정 (필요시)
        // inputElement.value = 'dfdf';
        inputElement.classList.add('organize-square');
        // class="organize-square"

        // 생성된 input 요소를 form1에 추가
        form3.appendChild(inputElement);
    }

    thirdMinusBtn.onclick = () => {
        const inputs = form3.querySelectorAll('input.organize-square');
        if(inputs.length > 0){
            const lastInput = inputs[inputs.length - 1];
            lastInput.remove();
        }

    }

</script>

<style>
input{
    border:none;
}

textarea{
    resize: none;
    border:none;
}
form{
    width: 150px;
}
.organize-check{
    display:flex;
    justify-content: center;
}
.organize-check > button {
    padding: 5px;
}

.organize-round-line-box{
    width: 150px;
    height: 150px;
    flex-direction: column;
    /* background-color: #EEEDED; */
    margin: 30px 10px;
    display:flex;
    justify-content: center;
    
}
.organize-square-line-box{
    width: 150px;
    /* height: 150px; */
    flex-direction: column;
    /* background-color: #EEEDED; */
    margin: 30px 10px;
    display:flex;
    justify-content: center;
}
.organize-round-line{
    width: 150px;
    height: 5px;
    border-radius: 30px;
    background-color: #EEEDED;
}
.organize-rounds{
    display:flex;
    justify-content: center;
    /* display:inline-flex; */
    /* text-align: center; */
    /* background-color: pink; */
    /* width: 100%; */
}
.organize-button-line{
    display:flex;
    height: 30px;
    justify-content: center;
    /* display:inline-flex; */
    /* text-align: center; */
    /* background-color: pink; */
    /* width: 100%; */
}
.organize-ceo-letter{
    display:flex;
    justify-content: center;
    margin: 10px;
}
.organize-lines-box{
    display:flex;
    justify-content: center;
}

.organize-lines{
    height: 80px;
    width: 5px;
    background-color: #EEEDED;
    border-radius: 20px;
}

.organize-box{
    display:flex;
    justify-content: center;
    /* display:inline-flex; */
    /* background-color: blue; */
    /* display:flex; */
    /* justify-content: center; */
}

.organize-round{
    width: 150px;
    height: 150px;
    background-color: #EEEDED;
    margin-top: 30px;
    border-radius: 50%;
    display:flex;
    justify-content: center;
    align-items: center;
    text-align:center;
    /* margin-right: 30px; */
}

.organize-round-first{
    width: 100px;
    height: 100px;
    background-color: #EEEDED;
    margin-top: 30px;
    border-radius: 50%;
    display:flex;
    justify-content: center;
    align-items: center;
    margin-left: 280px;
    margin-right: 30px;
    /* margin-right: 30px; */
}

.organize-square{
    width: 150px;
    height: 50px;
    background-color: #EEEDED;
    margin-top: 10px;
    /* border-radius: 50%; */
    display:flex;
    justify-content: center;
    align-items: center;
    text-align:center;
    /* margin-right: 30px; */
}

.organize-square-button{
    width: 150px;
    height: 30px;
    background-color: #EEEDED;
    /* margin-top: 10px; */
    /* border-radius: 50%; */
    display:flex;
    justify-content: end;
    align-items: center;
    /* margin-right: 30px; */
}

button{
    margin: 0px 5px;
}

.organize-line{
    /* position: absolute; */
    width: 250px;
    height: 100px;
    background-color: #EEEDED;
    margin-top: 30px;
    padding: 3px;
    /* display:flex; */
    /* justify-content: center; */
    /* align-items: center; */
    /* right: 40px; */
    /* text-align: right; */
    /* float:right; */
}

.table-list-design > div{
    /* display:flex; */
    /* justify-content: center; */

}


.nanum-myeongjo-regular{
  font-family: "Nanum Myeongjo", serif;
  font-weight: 400;
  font-style: normal;
}

.nanum-gothic-coding-regular{
  font-family: "Nanum Gothic Coding", monospace;
  font-weight: 400;
  font-style: normal;
}
.do-hyeon-regular{
  font-family: "Do Hyeon", sans-serif;
  font-weight: 400;
  font-style: normal;
}

*{
    font-family: "Do Hyeon"
}

h1 {
    font-size: 2.5rem;
    margin-bottom: 2rem;
}

body{
    margin: 0;
    padding: 0;
    height: 100vh;
    background-color: #EEEEEE;
}

.table-list {
    padding-top: 3rem;
    display: flex;
    flex-direction: column;
    align-items: center;
}

section {
    position: relative;
    width: 95vw;
    background-color: white;
}

.table-list-design{
    height: 80vh;
    padding: 0 10px 10px 10px;
    overflow-y: scroll;
    overflow-x: hidden;
}

.table-list-design::-webkit-scrollbar {
    width: 10px;
}
.table-list-design::-webkit-scrollbar-thumb {
    background-color:rgb(186, 186, 186);
    border-radius: 10px;
    background-clip: padding-box;
    border: 2px solid transparent;
}
.table-list-design::-webkit-scrollbar-track {
    background-color:  #ffffff;
    border-radius: 10px;
}


</style>
  